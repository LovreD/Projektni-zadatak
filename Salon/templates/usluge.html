{% extends "base.html" %}

{% block title %}Usluge - Frizerski salon{% endblock %}

{% block content %}
<div class="container py-5">
    <h1 class="mb-4">Rezervacija termina</h1>

    <form method="POST">

        <div class="mb-4">
            <label class="form-label fw-bold">Odaberite frizera:</label>

            <div class="row g-3">
                {% for ime in frizeri %}
                <div class="col-md-3 text-center">
                    <label class="border rounded p-2 d-block">
                        <img src="{{ url_for('static', filename='img/barbers/' ~ ime|lower ~ '.jpeg') }}"
                             class="img-fluid rounded mb-2"
                             style="max-height: 140px; object-fit: cover;"
                             alt="{{ ime }}">
                        <br>
                        <input type="radio" name="frizer" value="{{ ime }}" required>
                        {{ ime }}
                    </label>
                </div>
                {% endfor %}
            </div>
        </div>

        <div class="mb-4">
            <label class="form-label fw-bold" for="service">Odaberite uslugu:</label>
            <select name="service" id="service" class="form-select" required>
                <option value="">-- Odaberite uslugu --</option>
                {% for key, label, dur, price in usluge %}
                    <option value="{{ key }}">{{ label }} ({{ dur }} min, {{ price }} €)</option>
                {% endfor %}
            </select>

            <div class="form-check mt-2">
                <input type="checkbox" class="form-check-input" id="wash" name="wash">
                <label class="form-check-label" for="wash">Pranje kose (+ {{ wash_price }} €)</label>
            </div>
        </div>

        <div class="mb-4">
            <label class="form-label fw-bold" for="datum">Datum:</label>
            <input type="date" class="form-control" name="datum" id="datum" required min="{{ today }}">
        </div>

        <div class="mb-4">
            <label class="form-label fw-bold" for="termin">Termin:</label>
            <select class="form-select" name="termin" id="termin" required>
                <option value="">-- Odaberite termin --</option>
                {% for t in timeslots %}
                    <option value="{{ t }}">{{ t }}</option>
                {% endfor %}
            </select>
        </div>

        <div class="mb-3">
            <label for="napomena" class="form-label">Napomena (opcionalno)</label>
            <textarea id="napomena" name="napomena" class="form-control" rows="4"
              placeholder="Ovdje možete napisati napomenu..."></textarea>
        </div>

        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/easymde/dist/easymde.min.css">
        <script src="https://cdn.jsdelivr.net/npm/easymde/dist/easymde.min.js"></script>

        <script>
        document.addEventListener("DOMContentLoaded", function () {
            const textarea = document.getElementById("napomena");
            if (textarea) {
                new EasyMDE({
                    element: textarea,
                    spellChecker: false,
                    placeholder: "Ovdje možete napisati napomenu...",
                    autosave: {
                        enabled: false
            }
        });
    }
});
        </script>



        <button type="submit" class="btn btn-primary">Rezerviraj termin</button>

    </form>
</div>
{% endblock %}

